!function(e){var t={};function n(a){if(t[a])return t[a].exports;var l=t[a]={i:a,l:!1,exports:{}};return e[a].call(l.exports,l,l.exports,n),l.l=!0,l.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)n.d(a,l,function(t){return e[t]}.bind(null,l));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=6)}([function(e,t){e.exports={largestNumber:e=>{let t=0;return e.forEach(e=>{t<e&&(t=e)}),t},ReLu:e=>e>0?e:0}},function(e,t){e.exports={sharpenKernel:[0,-1,0,-1,5,-1,0,-1,0],sobelHorizontalKernel:[-1,0,1,-5,0,5,-1,0,1],sobelVerticalKernel:[-1,-5,-1,0,0,0,1,5,1],edgeDetectorKernel:[0,-1,0,-1,4,-1,0,-1,0]}},function(e,t,n){n(0);e.exports=class{constructor({redIndex:e,greenIndex:t,blueIndex:n,alphaIndex:a}){this.redIndex=e,this.greenIndex=t,this.blueIndex=n,this.alphaIndex=a}getRedIndex(){return this.redIndex}getGreenIndex(){return this.greenIndex}getBlueIndex(){return this.blueIndex}getAlphaIndex(){return this.alphaIndex}getIndexArray(){return[this.redIndex,this.greenIndex,this.blueIndex,this.alphaIndex]}getResult(){let e;return e=this.redIndex>this.greenIndex&&this.redIndex>this.blueIndex?.7*this.redIndex+.4*this.greenIndex+.3*this.blueIndex+.1*this.alphaIndex:this.greenIndex>this.redIndex&&this.greenIndex>this.blueIndex?.3*this.redIndex+.59*this.greenIndex+.2*this.blueIndex+.1*this.alphaIndex:this.blueIndex>this.redIndex&&this.blueIndex>this.greenIndex?.3*this.redIndex+.2*this.greenIndex+.55*this.blueIndex+.1*this.alphaIndex:.35*this.redIndex+.35*this.greenIndex+.35*this.blueIndex+.1*this.alphaIndex}toGrayScale(){let e=this.getResult();this.redIndex=this.greenIndex=this.blueIndex=e,this.alphaIndex=225}threshold(e){let t=this.getResult()>e?225:0;this.redIndex=this.greenIndex=this.blueIndex=t,this.alphaIndex=225}brighten(e){this.redIndex=this.redIndex+e,this.greenIndex=this.greenIndex+e,this.blueIndex=this.blueIndex+e}}},function(e,t,n){let a=n(0);e.exports={pushPixelToArray:(e,t)=>{e.forEach(e=>{t.push(e)})},applyKernelToChannel:(e,t)=>{let n=Math.sqrt(t.length),a=Math.floor(n/2),l=[];for(let r=0;r<28;r++)for(let i=0;i<28;i++){let s=0;for(let l=0;l<n;l++)for(let h=0;h<n;h++){let o=i+h-a,x=r+l-a;if(o>0&&o<28&&x>0&&x<28){let a=t[l*n+h];s+=e[x*r+o]*a}}l.push(s)}return new Uint8ClampedArray(l)},applyFunctionToChannel:(e,t)=>e.map(e=>t(e)),maxPool:e=>{let t=[],n=Math.round(Math.sqrt(e.length));for(let l=0;l<n;l+=2)for(let r=0;r<n;r+=2){let i=l*n+r,s=(l+1)*n+r,h=e[i],o=e[i+1],x=e[s],d=e[s+1],p=a.largestNumber([h,o,x,d]);t.push(p)}return new Uint8ClampedArray(t)}}},function(e,t,n){let a=n(2),l=n(3),r=n(1),{ReLu:i}=n(0);e.exports=class{constructor({data:e,width:t,height:n}){this.pixels=e,this.originalWidth=t,this.originalHeight=n}fromPixelsTo8Clamp(){let e=[];for(let t=0;t<this.pixels.length;t++){const n=this.pixels[t];e.push(n.redIndex),e.push(n.greenIndex),e.push(n.blueIndex),e.push(n.alphaIndex)}return new Uint8ClampedArray(e)}getPixels(){return this.pixels}toGrayScale(){let e=[];for(let t=0;t<this.pixels.length;t+=4){let n=new a({redIndex:this.pixels[t],greenIndex:this.pixels[t+1],blueIndex:this.pixels[t+2],alphaIndex:this.pixels[t+3]});n.toGrayScale(),l.pushPixelToArray(n.getIndexArray(),e)}this.pixels=new Uint8ClampedArray(e)}brighten(e=80){let t=[];for(let n=0;n<this.pixels.length;n+=4){let r=new a({redIndex:this.pixels[n],greenIndex:this.pixels[n+1],blueIndex:this.pixels[n+2],alphaIndex:this.pixels[n+3]});r.brighten(e),l.pushPixelToArray(r.getIndexArray(),t)}this.pixels=new Uint8ClampedArray(t)}threshold(e=100){let t=[];for(let n=0;n<this.pixels.length;n+=4){let r=new a({redIndex:this.pixels[n],greenIndex:this.pixels[n+1],blueIndex:this.pixels[n+2],alphaIndex:this.pixels[n+3]});r.threshold(e),l.pushPixelToArray(r.getIndexArray(),t)}this.pixels=new Uint8ClampedArray(t)}renderKernel(e){let t=Math.round(Math.sqrt(e.length)),n=Math.floor(t/2),a=this.pixels,l=[];for(let r=0;r<this.originalHeight;r++)for(let i=0;i<this.originalWidth;i++){let s=i,h=r,o=4*(r*this.originalWidth+i),x=0,d=0,p=0,u=0;for(let l=0;l<t;l++)for(let r=0;r<t;r++){let i=h+l-n,o=s+r-n;if(o>0&&o<this.originalWidth&&i>0&&i<this.originalHeight){let n=4*(i*this.originalWidth+o),s=e[l*t+r];x+=a[n]*s,d+=a[n+1]*s,p+=a[n+2]*s,u+=a[n+3]*s}}l[o]=x,l[o+1]=d,l[o+2]=p,l[o+3]=u+(255-u)}this.pixels=new Uint8ClampedArray(l)}renderKernels(...e){e.forEach(e=>{this.renderKernel(e)})}extractRGBchannels(){let e=[],t=[],n=[];for(let a=0;a<this.pixels.length;a+=4)e.push(this.pixels[a]),t.push(this.pixels[a+1]),n.push(this.pixels[a+2]);return{redChannel:e,greenChannel:t,blueChannel:n}}extractFeatures({filter:e=r.edgeDetectorKernel,activationFunction:t=i}){let n=this.extractRGBchannels(),a=l.applyKernelToChannel(n.redChannel,e),s=l.applyKernelToChannel(n.greenChannel,e),h=l.applyKernelToChannel(n.blueChannel,e);return a=l.applyFunctionToChannel(a,t),s=l.applyFunctionToChannel(s,t),h=l.applyFunctionToChannel(h,t),a=l.maxPool(a),s=l.maxPool(s),h=l.maxPool(h),a=l.applyKernelToChannel(a,e),s=l.applyKernelToChannel(s,e),h=l.applyKernelToChannel(h,e),a=l.applyFunctionToChannel(a,t),s=l.applyFunctionToChannel(s,t),h=l.applyFunctionToChannel(h,t),a=l.maxPool(a),s=l.maxPool(s),h=l.maxPool(h),a=l.maxPool(a),s=l.maxPool(s),h=l.maxPool(h),a=l.applyKernelToChannel(a,e),s=l.applyKernelToChannel(s,e),h=l.applyKernelToChannel(h,e),a=l.maxPool(a),s=l.maxPool(s),h=l.maxPool(h),a=l.maxPool(a),s=l.maxPool(s),h=l.maxPool(h),a=l.maxPool(a),s=l.maxPool(s),h=l.maxPool(h),console.log(a,s,h),{redChannel:a,greenChannel:s,blueChannel:h}}}},function(e,t,n){let a=n(2),l=n(4);e.exports=class{constructor(e){this.canvas=document.createElement("canvas"),this.image=e,this.canvas.width=this.WIDTH=e.width,this.canvas.height=this.HEIGHT=e.height,this.pixelMaster,this.ctx=this.canvas.getContext("2d"),this.ctx.drawImage(e,0,0)}renderImage(e){this.pixelMaster=e;let t=e.getPixels(),n=new ImageData(t,this.WIDTH,this.HEIGHT);this.ctx.putImageData(n,0,0)}setDimensions(e,t){this.canvas.width=this.WIDTH=e,this.canvas.height=this.HEIGHT=t,this.ctx.drawImage(this.image,0,0,e,t)}getDataURL(){return this.canvas.toDataURL()}clearCanvas(){this.ctx.clearRect(0,0,this.WIDTH,this.HEIGHT)}getRedDataURL(){let{redChannel:e}=this.pixelMaster.extractRGBchannels(),t=new ImageData(new Uint8ClampedArray(e),this.WIDTH/4);return this.clearCanvas(),this.ctx.putImageData(t,0,0),this.getDataURL()}getGreenDataURL(){let{greenChannel:e}=this.pixelMaster.extractRGBchannels(),t=new ImageData(new Uint8ClampedArray(e),this.WIDTH/4);return this.clearCanvas(),this.ctx.putImageData(t,0,0),this.getDataURL()}getBlueDataURL(){let{blueChannel:e}=this.pixelMaster.extractRGBchannels(),t=new ImageData(new Uint8ClampedArray(e),this.WIDTH/4);return this.clearCanvas(),this.ctx.putImageData(t,0,0),this.getDataURL()}getPixelMaster(){return new l(this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height))}getImageData(){return this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height)}getPixels(){let{data:e,width:t}=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height),n=[];for(let t=0;t<e.length;t+=4){let l=e[t],r=e[t+1],i=e[t+2],s=e[t+3];n.push(new a({redIndex:l,greenIndex:r,blueIndex:i,alphaIndex:s}))}return{pixels:n,width:t}}}},function(e,t,n){let a=n(5),l=n(1),{ReLu:r}=n(0);class i{static async fromImageURL(e){return new Promise((t,n)=>{let l=document.createElement("img");l.src=e,l.onload=function(){let e=new a(l);t(e)}})}static fromUint8ClampedArray(e,t){let n=new ImageData(e,t);return new a(n)}}i.kernels=l,i.ReLu=r,window&&(window.AgamottoEye=i),e.exports=i}]);